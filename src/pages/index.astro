---
import RootLayout from '../layouts/RootLayout.astro';
import { BLOG_INFO } from '../consts';
import { getCollection } from 'astro:content';
import PostCard from '../components/PostCard.astro';

const allPosts = await getCollection('blog');
const recentPosts = allPosts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 5);
---

<RootLayout title={BLOG_INFO.title} description={BLOG_INFO.description}>
	<h3>Recent Posts</h3>
	<div class="posts-grid">
		{recentPosts.map((post) => (
			<PostCard post={post} />
		))}
	</div>
</RootLayout>

<style>
	h3 {
		margin-bottom: 1.5rem;
	}

	.posts-grid {
		display: grid;
		gap: 1.5rem;
	}
</style>

