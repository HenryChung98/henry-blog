---
import type { CollectionEntry } from 'astro:content';
import RootLayout from './RootLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import TOC from '../components/blog/TOC.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate } = Astro.props;
---

<RootLayout title={title} description={description}>
	<article>
		<div class="prose">
			<div class="title">
				<div class="date">
					<h1>{title}</h1>
					<FormattedDate date={pubDate} />
					{
						updatedDate && (
							<div class="last-updated-on">
								Last updated on <FormattedDate date={updatedDate} />
							</div>
						)
					}
				</div>
			</div>
			<div class="disclaimer">
				<strong>Note:</strong> This post is a personal learning note and may contain inaccuracies or misunderstandings.
			</div>
			<hr />
			<slot />
		</div>
	</article>
	
	<TOC slot="right-sidebar" />
</RootLayout>
<style>
	article {
		width: 100%;
	}
	
	.prose {
		color: var(--muted-foreground);
	}
	
	.title {
		margin-bottom: 1em;
		padding: 1em 0;
		line-height: 1;
	}
	
	.date {
		margin-bottom: 0.5em;
		text-align: left;
		font-size: 1rem;
		color: var(--muted-foreground);
	}
	
	.last-updated-on {
		font-style: italic;
	}

	.disclaimer {
		background-color: oklch(0.35 0.12 65);
		border-left: 4px solid oklch(0.65 0.16 65);
		padding: 1rem 1.25rem;
		margin-bottom: 2rem;
		border-radius: 0.25rem;
		color: oklch(0.95 0.05 65);
		font-size: 0.9rem;
		line-height: 1.5;
	}

	.disclaimer strong {
		color: oklch(0.65 0.16 65);	
	}
</style>